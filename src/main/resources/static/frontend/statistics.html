<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Social Media Dashboard</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  .dropdown-item {
    width: 100%;
    text-align: left;
    padding: 10px 16px;
    display: flex;
    gap: 10px;
    align-items: center;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  .dropdown-item:hover {
    background: #f3f4f6;
  }
</style>
</head>

<body class="bg-gray-50 font-sans">

    <!-- TOP NAV -->
<nav class="bg-white border-b border-gray-100 sticky top-0 z-50">
  <div class="max-w-[1600px] mx-auto flex items-center justify-between px-8 h-16">

    <div class="flex items-center space-x-10">

      <div class="flex items-center space-x-2">
        <img src="assets/graphuralogo.png" alt="graphura Logo" class="h-14 w-auto">
       
      </div>

      <div class="hidden md:flex items-center space-x-1" id="navLinks">
        <a href="main.html" 
           class="px-4 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-all">
          Publish
        </a>
        <a href="statistics.html" 
           class="px-4 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-all">
          Statistics
        </a>
        <a href="library.html" 
           class="px-4 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-all">
          Media Library
        </a>
      </div>
    </div>

    <div class="flex items-center space-x-4">

      <div class="h-6 w-px bg-gray-200 mx-2"></div>

      <div class="relative" id="profileDropdown">
        <button
          id="profileBtn"
          class="group relative w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center border-2 border-transparent hover:border-blue-100 transition-all focus:outline-none">
          
          <svg class="w-5 h-5 text-gray-500 group-hover:text-blue-600 transition-colors" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/>
          </svg>

          <span class="absolute -top-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></span>
        </button>

        <div
          id="profileMenu"
          class="absolute right-0 mt-3 w-64 bg-white border border-gray-100 rounded-xl shadow-2xl hidden z-50 animate-in fade-in zoom-in duration-150">
          
          <div class="px-4 py-3 border-b border-gray-50">
            <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Account</p>
            <p id="userEmail" class="text-sm font-medium text-gray-900 truncate"></p>
          </div>

          <div class="py-1 text-sm text-gray-700">
            <button class="dropdown-item">‚öô Settings</button>
            <button class="dropdown-item">üß© Channels</button>
            <button onclick="logout()" class="dropdown-item text-red-500 hover:bg-red-50">Logout</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</nav>

  

  <!-- MAIN -->
  <main class="p-6 space-y-10">

    <!-- STATS CARDS -->
    <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <div class="bg-white p-6 rounded-xl shadow">
        <p class="text-gray-500">Scheduled Posts</p>
        <h2 class="text-3xl font-bold">24</h2>
      </div>

      <div class="bg-white p-6 rounded-xl shadow">
        <p class="text-gray-500">Total Followers</p>
        <h2 class="text-3xl font-bold">12.4K</h2>
      </div>

      <div class="bg-white p-6 rounded-xl shadow">
        <p class="text-gray-500">Engagement Rate</p>
        <h2 class="text-3xl font-bold">6.8%</h2>
      </div>

      <div class="bg-white p-6 rounded-xl shadow">
        <p class="text-gray-500">Platforms Connected</p>
        <h2 class="text-3xl font-bold">4</h2>
      </div>
    </section>

    <!-- CHART SECTION -->
    <section class="bg-white p-6 rounded-xl shadow">
      <h3 class="text-xl font-semibold mb-4">Followers Growth</h3>
      <canvas id="followersChart" height="120"></canvas>
    </section>

    <!-- PLATFORM STATUS -->
    <section class="bg-white p-6 rounded-xl shadow">
      <h3 class="text-xl font-semibold mb-4">Connected Platforms</h3>
      <ul class="space-y-2">
        <li>Instagram ‚úÖ</li>
        <li>Facebook ‚úÖ</li>
        <li>LinkedIn ‚úÖ</li>
        <li>Twitter ‚ùå</li>
      </ul>
    </section>

    <!-- ANALYTICS DASHBOARD -->
    <section class="bg-white p-6 rounded-xl shadow space-y-6">
      <h3 class="text-2xl font-bold">Analytics Dashboard</h3>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-gray-50 p-4 rounded-lg text-center">
          <p class="text-gray-500">Reach</p>
          <h4 class="text-2xl font-bold">58K</h4>
        </div>

        <div class="bg-gray-50 p-4 rounded-lg text-center">
          <p class="text-gray-500">Impressions</p>
          <h4 class="text-2xl font-bold">112K</h4>
        </div>

        <div class="bg-gray-50 p-4 rounded-lg text-center">
          <p class="text-gray-500">Engagement</p>
          <h4 class="text-2xl font-bold">6.8%</h4>
        </div>
      </div>

      <button
        onclick="downloadPDF()"
        class="bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition">
        üìÑ Download Analytics PDF
      </button>
    </section>

  </main>

  <!-- JS LOGIC -->
  <script>
    // Followers Growth Chart
    const ctx = document.getElementById("followersChart").getContext("2d");

    new Chart(ctx, {
      type: "line",
      data: {
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
        datasets: [{
          label: "Followers",
          data: [2000, 3500, 5000, 7600, 9800, 12400],
          borderWidth: 3,
          tension: 0.4
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        }
      }
    });

    // PDF Download
    function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF();

      pdf.text("Social Media Analytics Report", 20, 20);
      pdf.text("Followers Growth, Engagement & Reach Summary", 20, 40);
      pdf.text("Generated via Dashboard", 20, 60);

      pdf.save("analytics-report.pdf");
    }
  </script>
  
  <script>
  const navItems = document.querySelectorAll(".nav-item");

  function setActive(item) {
    navItems.forEach(el => {
      el.classList.remove(
        "text-blue-600",
        "border-b-2",
        "border-blue-600"
      );
      el.classList.add("text-gray-500");
    });

    item.classList.add(
      "text-blue-600",
      "border-b-2",
      "border-blue-600"
    );
    item.classList.remove("text-gray-500");
  }

  // Click handling
  navItems.forEach(item => {
    item.addEventListener("click", () => {
      setActive(item);
    });
  });

  // Page-based auto highlight (IMPORTANT)
  const currentPage = window.location.pathname;

  navItems.forEach(item => {
    if (
      item.dataset.page === "publish" && currentPage.includes("index") ||
      item.dataset.page === "statistics" && currentPage.includes("statistics")
    ) {
      setActive(item);
    }
  });

  // Profile button functionality
  const profileBtn = document.getElementById('profileBtn');
  const profileMenu = document.getElementById('profileMenu');

  if (profileBtn && profileMenu) {
    profileBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      profileMenu.classList.toggle('hidden');
    });

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!profileBtn.contains(e.target) && !profileMenu.contains(e.target)) {
        profileMenu.classList.add('hidden');
      }
    });
  }

  // Profile functions
  function logout() {
    if (confirm("Are you sure you want to logout?")) {
      localStorage.removeItem("authToken");
      localStorage.removeItem("userEmail");
      localStorage.removeItem("userName");
      window.location.href = "home.html";
    }
  }

  // Display user email on load
  window.addEventListener("load", () => {
    const userEmail = localStorage.getItem("userEmail") || "user@example.com";
    const userEmailElement = document.getElementById("userEmail");
    if (userEmailElement) {
      userEmailElement.textContent = userEmail;
    }

    // Set active nav link
    const page = window.location.pathname.split('/').pop();
    const navLinks = document.querySelectorAll('#navLinks a');
    navLinks.forEach(link => {
      const href = link.getAttribute('href');
      if (href === page) {
        link.classList.add('text-blue-600', 'bg-blue-50', 'font-semibold');
        link.classList.remove('text-gray-500', 'font-medium');
      } else {
        link.classList.remove('text-blue-600', 'bg-blue-50', 'font-semibold');
        link.classList.add('text-gray-500', 'font-medium');
      }
    });
  });
</script>

</body>
</html>
